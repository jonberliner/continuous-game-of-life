<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continuous Game of Life - RGBA</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Continuous Game of Life</h1>
            <p>Edge-Guided SmoothLife with Momentum</p>
        </header>

        <main>
            <div class="canvas-container">
                <canvas id="glCanvas"></canvas>
            </div>

            <div class="controls-sidebar">
                <div class="controls-container">
                    
                    <div class="control-section">
                        <h3>Image</h3>
                        <input type="file" id="imageUpload" accept="image/*">
                        <button id="pauseBtn">Pause</button>
                        <button id="resetBtn">Reset</button>
                    </div>

                    <div class="control-section">
                        <h3>Mode</h3>
                        <div class="mode-buttons">
                            <button id="spatialMode" class="mode-btn active">ðŸ”² Spatial</button>
                            <button id="frequencyMode" class="mode-btn">ðŸŽµ Frequency</button>
                        </div>
                        <small class="hint">Spatial = pixels evolve | Frequency = harmonics evolve</small>
                    </div>

                    <div class="control-section">
                        <h3>Look Presets</h3>
                        <div class="mode-buttons">
                            <button id="presetOrganic" class="mode-btn">Organic</button>
                            <button id="presetRegional" class="mode-btn">Regional</button>
                            <button id="presetDreamy" class="mode-btn">Dreamy</button>
                            <button id="presetWild" class="mode-btn">Wild</button>
                            <button id="presetSourceMemory" class="mode-btn">Source Memory</button>
                        </div>
                        <small class="hint">Pick a style, then fine tune with the core sliders</small>
                    </div>

                    <div class="control-section">
                        <h3>Core Controls</h3>
                        <label title="How finely the edge detector captures boundary detail">
                            Edge Fineness: <span id="edgeFinenessValue">0.62</span>
                            <input type="range" id="edgeFineness" min="0" max="1" value="0.62" step="0.01">
                        </label>
                        <small class="hint">Low = only major boundaries, High = finer edge detail</small>

                        <label title="How strongly boundaries re-imprint source structure near edges">
                            Edge Pump: <span id="edgePumpValue">0.22</span>
                            <input type="range" id="edgePump" min="0" max="1" value="0.22" step="0.01">
                        </label>
                        <small class="hint">Low = edges only constrain flow, High = stronger edge anchoring</small>

                        <label title="Merge dense tiny edge chatter into larger coherent sections">
                            Edge Merge: <span id="edgeMergeValue">0.72</span>
                            <input type="range" id="edgeMerge" min="0" max="1" value="0.72" step="0.01">
                        </label>
                        <small class="hint">Low = split on micro details, High = consolidate micro fragments into bigger sections</small>

                        <label title="Master section detail control: broad cartoon regions to edge-like partitions">
                            Boundary Simplification: <span id="boundarySimplificationValue">0.35</span>
                            <input type="range" id="boundarySimplification" min="0" max="1" value="0.35" step="0.01">
                        </label>
                        <small class="hint">Left = very few broad boundaries, Right = boundaries approach natural edge map detail</small>

                        <label title="Neighborhood width used by the GoL kernel">
                            Kernel Width: <span id="kernelWidthValue">4.5%</span>
                            <input type="range" id="kernelWidth" min="0" max="1" value="0.55" step="0.001">
                        </label>
                        <small class="hint">Low = fine/local motifs, High = broad regional motifs</small>

                        <label title="Hazard rate for injecting new random section colors inside closed regions">
                            Color Hazard: <span id="hazardRateValue">0.20</span>
                            <input type="range" id="hazardRate" min="0" max="1" value="0.20" step="0.01">
                        </label>
                        <small class="hint">Low = stable section colors, High = more frequent discrete color jumps</small>

                        <label title="How long each section keeps a chosen color before changing">
                            Palette Stability: <span id="paletteStabilityValue">0.72</span>
                            <input type="range" id="paletteStability" min="0" max="1" value="0.72" step="0.01">
                        </label>
                        <small class="hint">Low = frequent palette shifts, High = longer-lived section colors</small>

                        <label title="How strongly colors should adhere to source palette">
                            Source Color Adherence: <span id="sourceColorAdherenceValue">0.25</span>
                            <input type="range" id="sourceColorAdherence" min="0" max="1" value="0.25" step="0.01">
                        </label>
                        <small class="hint">Low = boundary-only source influence, High = source-like colors</small>

                        <label title="Simulation speed only (does not alter rule equations)">
                            Simulation Speed: <span id="simSpeedValue">0.32</span>
                            <input type="range" id="simSpeed" min="0.01" max="0.5" value="0.32" step="0.01">
                        </label>
                        <small class="hint">Low = slower evolution in real time, High = faster evolution</small>

                        <label title="Overall liveliness: motion speed and unpredictability together">
                            Evolution Energy: <span id="energyValue">0.62</span>
                            <input type="range" id="energy" min="0" max="1" value="0.62" step="0.01">
                        </label>
                        <small class="hint">Low = calmer/cleaner dynamics, High = more active and chaotic dynamics</small>

                        <label title="How strongly color gradients reshape Life pattern topology (dark vs colored regions)">
                            Color-Pattern Coupling: <span id="patternCouplingValue">0.72</span>
                            <input type="range" id="patternCoupling" min="0" max="1" value="0.72" step="0.01">
                        </label>
                        <small class="hint">Low = color mostly follows patterns, High = color and patterns strongly co-drive each other</small>

                        <label title="Display inferred broad section boundaries instead of final color output">
                            Show Boundary Boxes:
                            <input type="checkbox" id="showSections">
                        </label>
                    </div>

                    <div class="control-section">
                        <h3>Advanced (Optional)</h3>
                        <details>
                            <summary>Show advanced controls</summary>
                            <label title="How much tiny details split sections">
                                Micro Detail Influence: <span id="microDetailInfluenceValue">0.22</span>
                                <input type="range" id="microDetailInfluence" min="0" max="1" value="0.22" step="0.01">
                            </label>
                            <small class="hint">Low = smoother macro sections, High = tiny separators preserved</small>
                            <label title="How stable each section's texture identity stays over time">
                                Texture Persistence: <span id="noisePersistenceValue">0.82</span>
                                <input type="range" id="noisePersistence" min="0" max="1" value="0.82" step="0.01">
                            </label>
                            <small class="hint">Low = constantly changing texture, High = longer-lived section texture identity</small>
                            <label title="How much neighboring sections are allowed to bleed into each other">
                                Boundary Leakage: <span id="boundaryLeakageValue">0.18</span>
                                <input type="range" id="boundaryLeakage" min="0" max="1" value="0.18" step="0.01">
                            </label>
                            <small class="hint">Low = sections stay separate, High = more cross-boundary blending</small>
                        </details>
                    </div>

                    <div class="control-section">
                        <button id="resetBtn">Reset</button>
                        <button id="pauseBtn">Pause</button>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <script type="module" src="src/main.js"></script>
</body>
</html>