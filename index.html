<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continuous Game of Life - RGBA</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Continuous Game of Life</h1>
            <p>Edge-Guided SmoothLife with Momentum</p>
        </header>

        <main>
            <div class="canvas-container">
                <canvas id="glCanvas"></canvas>
            </div>

            <div class="controls-sidebar">
                <div class="controls-container">
                    
                    <div class="control-section">
                        <h3>Image</h3>
                        <input type="file" id="imageUpload" accept="image/*">
                        <button id="pauseBtn">Pause</button>
                        <button id="resetBtn">Reset</button>
                    </div>

                    <div class="control-section">
                        <h3>Configurations</h3>
                        <div class="config-save-row">
                            <input type="text" id="configName" placeholder="Name this config..." class="config-input">
                            <button id="saveConfigBtn">Save</button>
                        </div>
                        <div class="config-actions">
                            <button id="exportConfigBtn" class="config-btn-sm">Export JSON</button>
                            <label class="config-btn-sm import-label">
                                Import JSON
                                <input type="file" id="importConfig" accept=".json" style="display:none">
                            </label>
                        </div>
                        <div id="savedConfigsList" class="saved-configs-list"></div>
                    </div>

                    <div class="control-section">
                        <h3>Mode</h3>
                        <div class="mode-buttons">
                            <button id="spatialMode" class="mode-btn active">ðŸ”² Spatial</button>
                            <button id="frequencyMode" class="mode-btn">ðŸŽµ Frequency</button>
                        </div>
                        <small class="hint">Spatial = pixels evolve | Frequency = harmonics evolve</small>
                    </div>

                    <div class="control-section">
                        <h3>Look Presets</h3>
                        <div class="mode-buttons">
                            <button id="presetOrganic" class="mode-btn">Organic</button>
                            <button id="presetRegional" class="mode-btn">Regional</button>
                            <button id="presetDreamy" class="mode-btn">Dreamy</button>
                            <button id="presetWild" class="mode-btn">Wild</button>
                            <button id="presetSourceMemory" class="mode-btn">Source Memory</button>
                        </div>
                        <small class="hint">Pick a style, then fine tune with the core sliders</small>
                    </div>

                    <div class="control-section">
                        <h3>Core Controls</h3>

                        <label title="How many/few region boundaries exist: broad cartoon zones to fine edge-like partitions">
                            Boundary Simplification: <span id="boundarySimplificationValue">0.35</span>
                            <input type="range" id="boundarySimplification" min="0" max="1" value="0.35" step="0.01">
                        </label>
                        <small class="hint">Left = very few broad boundaries, Right = finer region detail</small>

                        <label title="How strongly boundaries persist. Low = erode away, High = clear unbroken boundaries">
                            Boundary Strength: <span id="boundaryStrengthValue">0.70</span>
                            <input type="range" id="boundaryStrength" min="0" max="1" value="0.70" step="0.01">
                        </label>
                        <small class="hint">0 = boundaries fully erode, 100% = strong persistent boundaries</small>

                        <label title="Neighborhood width used by the GoL kernel">
                            Kernel Width: <span id="kernelWidthValue">4.5%</span>
                            <input type="range" id="kernelWidth" min="0" max="1" value="0.55" step="0.001">
                        </label>
                        <small class="hint">Low = fine/local motifs, High = broad regional motifs</small>

                        <label title="Hazard rate for injecting new random section colors inside closed regions">
                            Color Hazard: <span id="hazardRateValue">0.20</span>
                            <input type="range" id="hazardRate" min="0" max="1" value="0.20" step="0.01">
                        </label>
                        <small class="hint">Low = stable section colors, High = more frequent discrete color jumps</small>

                        <label title="How strongly colors should adhere to source palette">
                            Source Color Adherence: <span id="sourceColorAdherenceValue">0.25</span>
                            <input type="range" id="sourceColorAdherence" min="0" max="1" value="0.25" step="0.01">
                        </label>
                        <small class="hint">Low = free color evolution, High = source-like colors</small>

                        <label title="How much local color uniformity drives pattern instability. Uniform colors breed new patterns, creating a breathing cycle">
                            Color Feedback: <span id="colorFeedbackValue">0.50</span>
                            <input type="range" id="colorFeedback" min="0" max="1" value="0.50" step="0.01">
                        </label>
                        <small class="hint">0 = patterns ignore color | 100% = uniform colors destabilize patterns, driving breathing evolution</small>

                        <label title="How much colors resist change between wavefront events. High = coherent color blocks that shift only at wavefronts">
                            Color Inertia: <span id="colorInertiaValue">0.30</span>
                            <input type="range" id="colorInertia" min="0" max="1" value="0.30" step="0.01">
                        </label>
                        <small class="hint">0 = colors shimmer freely | 100% = only major wavefronts shift colors (coherent blocks)</small>

                        <label title="GoL activity rotates the source color anchor â€” active areas evolve their reference point, creating a feedback loop">
                            Source Drift: <span id="sourceDriftValue">0.00</span>
                            <input type="range" id="sourceDrift" min="0" max="1" value="0.00" step="0.01">
                        </label>
                        <small class="hint">0 = static source memory | High = wavefronts shift what "source" means, creating perpetual evolution</small>

                        <label title="Simulation speed (logarithmic). Far left = watch single steps, far right = very fast">
                            Simulation Speed: <span id="simSpeedValue">0.65</span>
                            <input type="range" id="simSpeed" min="0" max="1" value="0.65" step="0.01">
                        </label>
                        <small class="hint">Logarithmic: far left = single timesteps, far right = 10Ã— fast</small>

                        <label title="Overall liveliness: motion speed and unpredictability together">
                            Evolution Energy: <span id="energyValue">0.62</span>
                            <input type="range" id="energy" min="0" max="1" value="0.62" step="0.01">
                        </label>
                        <small class="hint">Low = calmer/cleaner dynamics, High = more active and chaotic</small>

                        <label title="Display the living boundary field instead of final color output">
                            Show Boundaries:
                            <input type="checkbox" id="showSections">
                        </label>
                    </div>

                    <div class="control-section">
                        <h3>Rule Parameters (Advanced)</h3>
                        <details>
                            <summary>Show all internal parameters</summary>
                            <p class="hint" style="margin-top:8px; margin-bottom:12px;">Every tunable coefficient in the SmoothLife rules, color dynamics, convolution, boundary evolution, and output assembly. Organized by subsystem.</p>
                            <div id="ruleParamsContainer"></div>
                        </details>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <script type="module" src="src/main.js"></script>
</body>
</html>
